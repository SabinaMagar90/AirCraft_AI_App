<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Prediction</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h1>Predict Average Speed (avg_mph)</h1>

    <!-- Back button -->
    <form action="/" method="get" style="margin-bottom: 20px;">
      <button type="submit" class="btn">Back</button>
    </form>

    <form method="POST" class="card">
      <label>Average Altitude (ft)</label>
      <input name="avg_alt" type="number" step="1" required value="{{ request.form.get('avg_alt', 30000) }}">

      <label>Mean Latitude</label>
      <input name="mean_lat" type="number" step="0.0001" value="{{ request.form.get('mean_lat', 34.1) }}">

      <label>Mean Longitude</label>
      <input name="mean_long" type="number" step="0.0001" value="{{ request.form.get('mean_long', -118.2) }}">

      <label>Log Flight Count</label>
      <input name="log_flight_count" type="number" step="0.0001" value="{{ request.form.get('log_flight_count', 1.5) }}">

      <label>Manufacturer</label>
      <select name="manufacturer">
        <option value="UNKNOWN" {% if request.form.get('manufacturer') == 'UNKNOWN' %}selected{% endif %}>UNKNOWN</option>
        {% for m in manufacturers %}
          <option value="{{ m }}" {% if request.form.get('manufacturer') == m %}selected{% endif %}>{{ m }}</option>
        {% endfor %}
      </select>

      <label>Model (optional)</label>
      <select name="model">
        <option value="UNKNOWN" {% if request.form.get('model') == 'UNKNOWN' %}selected{% endif %}>UNKNOWN</option>
        {% for mo in models %}
          <option value="{{ mo }}" {% if request.form.get('model') == mo %}selected{% endif %}>{{ mo }}</option>
        {% endfor %}
      </select>

      <label>Registration State</label>
      <select name="reg_state">
        <option value="UNKNOWN" {% if request.form.get('reg_state') == 'UNKNOWN' %}selected{% endif %}>UNKNOWN</option>
        {% for s in states %}
          <option value="{{ s }}" {% if request.form.get('reg_state') == s %}selected{% endif %}>{{ s }}</option>
        {% endfor %}
      </select>

      <button class="btn" type="submit">Predict</button>
    </form>

    {% if result %}
      <div class="result">
        <h2>Prediction Result</h2>
        <p><b>Predicted avg_mph:</b> {{ result.pred_mph }}</p>
        <p class="small"><b>Inputs used:</b> {{ result.inputs }}</p>
      </div>
    {% endif %}
  </div>
</body>
</html>
